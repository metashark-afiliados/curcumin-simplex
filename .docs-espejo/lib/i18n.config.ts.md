# /.docs-espejo/lib/i18n.config.ts.md
/**
 * @file .docs-espejo/lib/i18n.config.ts.md
 * @description Documento espejo para el aparato de configuración de i18n.
 * @version 1.0.0
 * @author RaZ podesta - MetaShark Tech
 */

# Manifiesto Conceptual: El Pasaporte de Internacionalización

## 1. Rol Estratégico

El aparato `i18n.config.ts` es la **Única Fuente de Verdad (SSoT) para la definición de los idiomas soportados** en todo el ecosistema de `curcumin-simplex`. Su rol es establecer un contrato inmutable y universalmente accesible que defina qué locales son válidos.

Es un aparato de "configuración pura", diseñado para no tener dependencias externas complejas, lo que garantiza que pueda ser importado de forma segura en cualquier parte de la aplicación (entorno de servidor, cliente o de borde) sin causar efectos secundarios.

## 2. Arquitectura y Flujo de Ejecución

La arquitectura se basa en la definición de constantes y tipos derivados para máxima seguridad y claridad.

1.  **`supportedLocales` (La SSoT):** Una tupla `const` de strings que define la lista canónica de locales. El uso de `as const` la hace inmutable y permite a TypeScript inferir su tipo de la forma más estricta posible.
2.  **`Locale` (El Tipo):** Un tipo derivado directamente de `supportedLocales`. Cualquier variable o parámetro tipado como `Locale` solo puede aceptar uno de los valores definidos, eliminando una clase entera de posibles errores.
3.  **`defaultLocale` (El Fallback Seguro):** Una constante que encapsula la lógica para determinar el idioma por defecto. Su flujo es:
    *   Intenta leer la variable de entorno `NEXT_PUBLIC_SITE_LOCALE`.
    *   Utiliza Zod para **validar** si el valor de la variable de entorno está presente en la lista de `supportedLocales`.
    *   Si es válido, lo utiliza.
    *   Si no está definido o no es válido, utiliza un valor de fallback predefinido y seguro (`'it-IT'`), y emite una advertencia en el log de build si el valor era inválido.

## 3. Contrato de API

Este aparato exporta tres constantes públicas:

*   `supportedLocales: readonly string[]`: La lista de locales válidos.
*   `Locale: type`: El tipo TypeScript para un locale válido.
*   `defaultLocale: Locale`: El locale a utilizar como fallback en toda la aplicación.

## 4. Zona de Melhorias Futuras

1.  **Configuración desde un CMS:** En una arquitectura más avanzada, la lista `supportedLocales` podría ser generada dinámicamente en tiempo de build a partir de una llamada a un CMS headless, permitiendo al equipo de contenido añadir o quitar idiomas sin tocar el código.
2.  **Mapeo de Locales a Nombres Legibles:** Se podría extender la configuración para incluir un objeto que mapee los códigos de locale (`it-IT`) a sus nombres completos (`Italiano`), para ser utilizado en selectores de idioma en la UI.
3.  **Integración con Librerías de Fechas/Números:** La configuración podría exportar objetos de configuración para librerías como `date-fns`, asociando cada `Locale` a su objeto de formato de fecha correspondiente.