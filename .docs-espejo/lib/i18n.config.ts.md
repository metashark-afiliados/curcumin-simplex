// .docs-espejo/lib/i18n.config.ts.md
/**
 * @file i18n.config.ts.md
 * @description Documento Espejo para la SSoT de Configuración de i18n.
 * @version 1.0.0
 * @author RaZ podesta - MetaShark Tech
 */

# Manifiesto Conceptual: Configuración Estática de i18n

## 1. Rol Estratégico

El aparato `src/lib/i18n.config.ts` es la **piedra angular inmutable** de toda la arquitectura de internacionalización. Su única y crucial responsabilidad es definir el conjunto de "verdades universales" sobre los idiomas del proyecto: qué idiomas existen y cuál es el idioma por defecto.

Por diseño, este aparato es "puro" y no tiene dependencias complejas. Esto le permite ser importado de forma segura en cualquier parte del sistema, incluyendo entornos de alta sensibilidad como el Middleware de Next.js, sin riesgo de causar errores de resolución de módulos.

## 2. Arquitectura y Flujo de Ejecución

1.  **Definición de SSoT (`supportedLocales`):** Se define un `array` de solo lectura (`as const`) que lista explícitamente los códigos de todos los locales soportados. Esta constante es la Única Fuente de Verdad para cualquier lógica que necesite iterar o validar contra la lista de idiomas disponibles.
2.  **Inferencia de Tipos (`Locale`):** Se deriva un tipo de TypeScript (`Locale`) directamente del array `supportedLocales`. Esto garantiza que el resto de la aplicación trabaje con seguridad de tipos, previniendo errores por códigos de idioma mal escritos.
3.  **Definición del Default (`defaultLocale`):**
    *   **Entrada:** Intenta leer la variable de entorno `NEXT_PUBLIC_SITE_LOCALE`.
    *   **Fallback:** Si la variable no está definida, utiliza un valor de fallback seguro y predefinido (`es-ES`).
    *   **Validación:** Utiliza un schema de Zod (`LocaleEnum`) para validar que el valor final (ya sea de la variable de entorno o del fallback) es uno de los `supportedLocales`. Si no lo es, el proceso de build fallará, previniendo una configuración incorrecta en producción.
4.  **Salida:** Exporta `supportedLocales`, el tipo `Locale`, y `defaultLocale` para ser consumidos por el resto del sistema.

## 3. Contrato de API

*   **`supportedLocales: readonly string[]`**: Un array inmutable con los códigos de los idiomas soportados.
*   **`type Locale: string`**: Un tipo de string literal que solo puede ser uno de los valores de `supportedLocales`.
*   **`defaultLocale: Locale`**: El locale por defecto validado.

## 4. Zona de Melhorias Futuras

1.  **Configuración de Metadatos de Locale:** Ampliar el `supportedLocales` a un array de objetos, donde cada objeto contenga no solo el código, sino también el nombre del idioma en su lengua nativa (ej. `{ code: 'es-ES', name: 'Español' }`), el cual podría ser consumido por el `LanguageSwitcher`.
2.  **Integración con CMS:** En una arquitectura más avanzada, la lista de `supportedLocales` podría ser generada dinámicamente en tiempo de build consultando los idiomas habilitados en un Headless CMS.
// .docs-espejo/lib/i18n.config.ts.md